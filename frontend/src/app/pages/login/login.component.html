<div class="login-form">
    <mat-card>
        <mat-card-content>
            <div><mat-toolbar color="accent"> Log in </mat-toolbar></div>
            <form
                [formGroup]="loginForm"
                (ngSubmit)="login()"
                fxLayout="column"
            >
                <mat-progress-bar
                    mode="determinate"
                    color="primary"
                ></mat-progress-bar>
                <mat-form-field>
                    <input
                        matInput
                        placeholder="Username"
                        formControlName="username"
                    />
                    <mat-error
                        *ngFor="let validation of validation_messages.username"
                    >
                        <mat-error
                            class="error-message"
                            *ngIf="
                                loginForm
                                    .get('username')
                                    .hasError(validation.type) &&
                                (loginForm.get('username').dirty ||
                                    loginForm.get('username').touched)
                            "
                            >{{ validation.message }}</mat-error
                        >
                    </mat-error>
                </mat-form-field>
                <mat-form-field>
                    <input
                        matInput
                        placeholder="Password"
                        formControlName="password"
                        [type]="hide ? 'password' : 'text'"
                    />
                    <mat-icon matSuffix (click)="hide = !hide">{{
                        hide ? "visibility_off" : "visibility"
                    }}</mat-icon>
                    <mat-error
                        *ngFor="let validation of validation_messages.password"
                    >
                        <mat-error
                            class="error-message"
                            *ngIf="
                                loginForm
                                    .get('password')
                                    .hasError(validation.type) &&
                                (loginForm.get('password').dirty ||
                                    loginForm.get('password').touched)
                            "
                            >{{ validation.message }}</mat-error
                        >
                    </mat-error>
                </mat-form-field>
                <div class="form-actions" fxLayout="row" fxLayoutGap="20px">
                    <button class="mat-raised-button" (click)="close()">
                        Cancel
                    </button>
                    <button
                        class="mat-raised-button mat-primary"
                        [disabled]="!loginForm.valid"
                    >
                        Log In
                    </button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
</div>
